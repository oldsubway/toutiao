"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[296],{5799:function(t,i,e){e.r(i),e.d(i,{default:function(){return d}});var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"search-result-container"},[i("van-nav-bar",{attrs:{title:"搜索结果","left-arrow":"",fixed:""},on:{"click-left":function(i){return t.$router.back()}}}),i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.searchList,(function(t){return i("art-item",{key:t.art_id,attrs:{article:t,closeAble:!1}})})),1)],1)},s=[],a=e(6653),r=e(9811),o={name:"SearchResult",components:{ArtItem:r.Z},props:["kw"],data(){return{searchList:[],loading:!1,finished:!1,page:0}},watch:{kw(){this.page=0,this.searchList=[],this.loading=!1,this.finished=!1,this.initSearchList()}},created(){this.initSearchList()},beforeRouteLeave(t,i,e){i.meta.top=window.scrollY,e()},methods:{async initSearchList(){const{data:t}=await(0,a.S)(this.kw,this.page);this.searchList=[...this.searchList,...t.documents],this.loading=!1,0===t.documents.length&&(this.finished=!0),this.page+=1},onLoad(){this.initSearchList()}}},c=o,l=e(1001),h=(0,l.Z)(c,n,s,!1,null,"65644bca",null),d=h.exports},6653:function(t,i,e){e.d(i,{S:function(){return a},Y:function(){return s}});var n=e(4471);const s=t=>{const i={projection:{title:1,_id:0},sort:{art_id:1},collection:"articles"};return n.Z.post("/action/find",i).then((i=>{const e=i.data.documents.filter((i=>i.title.toUpperCase().includes(t.toUpperCase())));return e.map((t=>t.title))}))},a=(t,i)=>{const e={skip:0+10*i,limit:10,sort:{art_id:1},projection:{_id:0},collection:"articles"};return n.Z.post("/action/find",e)}}}]);
//# sourceMappingURL=296.0ac13162.js.map
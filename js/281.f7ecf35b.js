"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[281],{7281:function(t,e,n){n.r(e),n.d(e,{default:function(){return Te}});var s=function(){var t=this,e=t._self._c;return t.article?e("div",[e("van-nav-bar",{attrs:{fixed:"",title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"article-container"},[e("h1",{staticClass:"art-title"},[t._v(t._s(t.article.title))]),e("van-cell",{attrs:{title:t.article.aut_name,label:t._f("dateFormat")(t.article.pubdate)},scopedSlots:t._u([{key:"icon",fn:function(){return[e("img",{staticClass:"avatar",attrs:{src:n(6949),alt:""}})]},proxy:!0},{key:"default",fn:function(){return[e("div",[t.article.is_followed?e("van-button",{attrs:{type:"info",size:"mini"},on:{click:t.setUnfollow}},[t._v("已关注")]):e("van-button",{attrs:{icon:"plus",type:"info",size:"mini",plain:""},on:{click:t.setFollow}},[t._v("关注")])],1)]},proxy:!0}],null,!1,634204348)}),e("van-divider"),e("div",{staticClass:"art-content",domProps:{innerHTML:t._s(t.article.content)}}),e("van-divider",[t._v("End")]),e("div",{staticClass:"like-box"},[t.article.attitude?e("van-button",{attrs:{icon:"good-job",type:"danger",size:"small"},on:{click:t.setDisLike}},[t._v("已点赞")]):e("van-button",{attrs:{icon:"good-job-o",type:"danger",plain:"",size:"small"},on:{click:t.setLike}},[t._v("点赞")])],1)],1),e("art-cmt",{attrs:{"art-id":t.id}})],1):t._e()},a=[],o=n(4471),r=n(5743),i=n.n(r);const c=t=>{const e={pipeline:[{$match:{art_id:t}},{$lookup:{from:"user",let:{autId:"$aut_id",artId:"$art_id"},pipeline:[{$addFields:{attitude:{$in:["$$artId","$attitudes"]}}},{$addFields:{is_followed:{$in:["$$autId","$followings"]}}},{$project:{is_followed:1,attitude:1,_id:0}}],as:"is_followings"}},{$replaceRoot:{newRoot:{$mergeObjects:[{$arrayElemAt:["$is_followings",0]},"$$ROOT"]}}},{$project:{is_followings:0,_id:0}}],collection:"articles"};return o.Z.post("/action/aggregate",e)},l=t=>{const e={update:{$push:{followings:t}},collection:"user"};return o.Z.post("/action/updateOne",e)},u=t=>{const e={update:{$pull:{followings:t}},collection:"user"};return o.Z.post("/action/updateOne",e)},d=t=>{const e={update:{$push:{attitudes:t}},collection:"user"};return o.Z.post("/action/updateOne",e)},p=t=>{const e={update:{$pull:{attitudes:t}},collection:"user"};return o.Z.post("/action/updateOne",e)},m=(t,e)=>{const n={pipeline:[{$match:{art_id:"6268"}},{$project:{comments:1,comm_count:1,_id:0}},{$unwind:"$comments"},{$replaceRoot:{newRoot:{$mergeObjects:["$comments","$$ROOT"]}}},{$sort:{pubdate:-1}},{$skip:0+5*e},{$limit:5}],collection:"articles"};return o.Z.post("/action/aggregate",n)},f=(t,e)=>{const n={com_id:Array(19).fill("").map((()=>Math.floor(10*Math.random()))).join(""),content:e,pubdate:i()().format("YYYY-MM-DD HH:mm:ss"),aut_name:["佟湘玉","李大嘴","郭芙蓉","白展堂","许秀才"][Math.floor(5*Math.random())],is_liking:Math.floor(2*Math.random())};console.log(n);const s={filter:{art_id:t},update:{$inc:{comm_count:1},$push:{comments:n}},collection:"articles"};return o.Z.post("/action/updateOne",s).then((t=>n))};var h=function(){var t=this,e=t._self._c;return e("div",{class:t.isShowBox1?"art-cmt-container-1":"art-cmt-container-2"},[e("van-list",{staticClass:"cmt-list",attrs:{finished:t.finished,"finished-text":"没有更多评论了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.cmtList,(function(s){return e("div",{key:s.com_id,staticClass:"cmt-item"},[e("div",{staticClass:"cmt-header"},[e("div",{staticClass:"cmt-header-left"},[e("img",{staticClass:"avatar",attrs:{src:n(6949),alt:""}}),e("span",{staticClass:"uname"},[t._v(t._s(s.aut_name))])]),e("div",{staticClass:"cmt-header-right"},[s.is_liking?e("van-icon",{attrs:{name:"like",size:"16",color:"red"}}):e("van-icon",{attrs:{name:"like-o",size:"16",color:"gray"}})],1)]),e("div",{staticClass:"cmt-body"},[t._v(t._s(s.content))]),e("div",{staticClass:"cmt-footer"},[t._v(t._s(t._f("dateFormat")(s.pubdate)))])])})),0),t.isShowBox1?e("div",{staticClass:"add-cmt-box van-hairline--top"},[e("div",{staticClass:"ipt-cmt-div",on:{click:t.showBox2}},[t._v("发表评论")]),e("div",{staticClass:"icon-box"},[e("van-badge",{attrs:{content:t.count,max:99}},[e("van-icon",{attrs:{name:"comment-o",size:"20"},on:{click:t.scrollToCmtList}})],1),e("van-icon",{attrs:{name:"star-o",size:"20"}}),e("van-icon",{attrs:{name:"share-o",size:"20"}})],1)]):e("div",{staticClass:"cmt-box van-hairline--top"},[e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.cmt,expression:"cmt",modifiers:{trim:!0}}],ref:"iptCmt",attrs:{placeholder:"友善评论、理性发言、阳光心灵"},domProps:{value:t.cmt},on:{blur:[t.hideBox2,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.cmt=e.target.value.trim())}}}),e("van-button",{attrs:{type:"default",disabled:0===t.cmt.length},on:{click:t.addCmt}},[t._v("发布")])],1)],1)},g=[];n(541),n(7658);function v(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]])}return n}Object.create;Object.create;var b=function(){},y=function(){};const w=(t,e,n)=>Math.min(Math.max(n,t),e),M=.001,$=.01,_=10,x=.05,O=1;function k({duration:t=800,bounce:e=.25,velocity:n=0,mass:s=1}){let a,o;b(t<=1e3*_,"Spring duration must be 10 seconds or less");let r=1-e;r=w(x,O,r),t=w($,_,t/1e3),r<1?(a=e=>{const s=e*r,a=s*t,o=s-n,i=A(e,r),c=Math.exp(-a);return M-o/i*c},o=e=>{const s=e*r,o=s*t,i=o*n+n,c=Math.pow(r,2)*Math.pow(e,2)*t,l=Math.exp(-o),u=A(Math.pow(e,2),r),d=-a(e)+M>0?-1:1;return d*((i-c)*l)/u}):(a=e=>{const s=Math.exp(-e*t),a=(e-n)*t+1;return s*a-M},o=e=>{const s=Math.exp(-e*t),a=t*t*(n-e);return s*a});const i=5/t,c=j(a,o,i);if(t*=1e3,isNaN(c))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(c,2)*s;return{stiffness:e,damping:2*r*Math.sqrt(s*e),duration:t}}}const C=12;function j(t,e,n){let s=n;for(let a=1;a<C;a++)s-=t(s)/e(s);return s}function A(t,e){return t*Math.sqrt(1-e*e)}const L=["duration","bounce"],S=["stiffness","damping","mass"];function R(t,e){return e.some((e=>void 0!==t[e]))}function F(t){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!R(t,S)&&R(t,L)){const n=k(t);e=Object.assign(Object.assign(Object.assign({},e),n),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function T(t){var{from:e=0,to:n=1,restSpeed:s=2,restDelta:a}=t,o=v(t,["from","to","restSpeed","restDelta"]);const r={done:!1,value:e};let{stiffness:i,damping:c,mass:l,velocity:u,duration:d,isResolvedFromDuration:p}=F(o),m=D,f=D;function h(){const t=u?-u/1e3:0,s=n-e,o=c/(2*Math.sqrt(i*l)),r=Math.sqrt(i/l)/1e3;if(void 0===a&&(a=Math.min(Math.abs(n-e)/100,.4)),o<1){const e=A(r,o);m=a=>{const i=Math.exp(-o*r*a);return n-i*((t+o*r*s)/e*Math.sin(e*a)+s*Math.cos(e*a))},f=n=>{const a=Math.exp(-o*r*n);return o*r*a*(Math.sin(e*n)*(t+o*r*s)/e+s*Math.cos(e*n))-a*(Math.cos(e*n)*(t+o*r*s)-e*s*Math.sin(e*n))}}else if(1===o)m=e=>n-Math.exp(-r*e)*(s+(t+r*s)*e);else{const e=r*Math.sqrt(o*o-1);m=a=>{const i=Math.exp(-o*r*a),c=Math.min(e*a,300);return n-i*((t+o*r*s)*Math.sinh(c)+e*s*Math.cosh(c))/e}}}return h(),{next:t=>{const e=m(t);if(p)r.done=t>=d;else{const o=1e3*f(t),i=Math.abs(o)<=s,c=Math.abs(n-e)<=a;r.done=i&&c}return r.value=r.done?n:e,r},flipTarget:()=>{u=-u,[e,n]=[n,e],h()}}}T.needsInterpolation=(t,e)=>"string"===typeof t||"string"===typeof e;const D=t=>0,B=(t,e,n)=>{const s=e-t;return 0===s?1:(n-t)/s},I=(t,e,n)=>-n*t+n*e+t,q=(t,e)=>n=>Math.max(Math.min(n,e),t),N=t=>t%1?Number(t.toFixed(5)):t,z=/(-)?([\d]*\.?[\d])+/g,P=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Z=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function H(t){return"string"===typeof t}const U={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},Y=Object.assign(Object.assign({},U),{transform:q(0,1)}),E=(Object.assign(Object.assign({},U),{default:1}),(t,e)=>n=>Boolean(H(n)&&Z.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e))),G=(t,e,n)=>s=>{if(!H(s))return s;const[a,o,r,i]=s.match(z);return{[t]:parseFloat(a),[e]:parseFloat(o),[n]:parseFloat(r),alpha:void 0!==i?parseFloat(i):1}},W=q(0,255),J=Object.assign(Object.assign({},U),{transform:t=>Math.round(W(t))}),K={test:E("rgb","red"),parse:G("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+J.transform(t)+", "+J.transform(e)+", "+J.transform(n)+", "+N(Y.transform(s))+")"};function Q(t){let e="",n="",s="",a="";return t.length>5?(e=t.substr(1,2),n=t.substr(3,2),s=t.substr(5,2),a=t.substr(7,2)):(e=t.substr(1,1),n=t.substr(2,1),s=t.substr(3,1),a=t.substr(4,1),e+=e,n+=n,s+=s,a+=a),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const V={test:E("#"),parse:Q,transform:K.transform},X=t=>({test:e=>H(e)&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),tt=(X("deg"),X("%")),et=(X("px"),X("vh"),X("vw"),Object.assign(Object.assign({},tt),{parse:t=>tt.parse(t)/100,transform:t=>tt.transform(100*t)}),{test:E("hsl","hue"),parse:G("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+tt.transform(N(e))+", "+tt.transform(N(n))+", "+N(Y.transform(s))+")"});function nt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function st({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let a=0,o=0,r=0;if(e){const s=n<.5?n*(1+e):n+e-n*e,i=2*n-s;a=nt(i,s,t+1/3),o=nt(i,s,t),r=nt(i,s,t-1/3)}else a=o=r=n;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*r),alpha:s}}const at=(t,e,n)=>{const s=t*t,a=e*e;return Math.sqrt(Math.max(0,n*(a-s)+s))},ot=[V,K,et],rt=t=>ot.find((e=>e.test(t))),it=t=>`'${t}' is not an animatable color. Use the equivalent color code instead.`,ct=(t,e)=>{let n=rt(t),s=rt(e);y(!!n,it(t)),y(!!s,it(e));let a=n.parse(t),o=s.parse(e);n===et&&(a=st(a),n=K),s===et&&(o=st(o),s=K);const r=Object.assign({},a);return t=>{for(const e in r)"alpha"!==e&&(r[e]=at(a[e],o[e],t));return r.alpha=I(a.alpha,o.alpha,t),n.transform(r)}},lt={test:t=>K.test(t)||V.test(t)||et.test(t),parse:t=>K.test(t)?K.parse(t):et.test(t)?et.parse(t):V.parse(t),transform:t=>H(t)?t:t.hasOwnProperty("red")?K.transform(t):et.transform(t)},ut="${c}",dt="${n}";function pt(t){var e,n,s,a;return isNaN(t)&&H(t)&&(null!==(n=null===(e=t.match(z))||void 0===e?void 0:e.length)&&void 0!==n?n:0)+(null!==(a=null===(s=t.match(P))||void 0===s?void 0:s.length)&&void 0!==a?a:0)>0}function mt(t){"number"===typeof t&&(t=`${t}`);const e=[];let n=0;const s=t.match(P);s&&(n=s.length,t=t.replace(P,ut),e.push(...s.map(lt.parse)));const a=t.match(z);return a&&(t=t.replace(z,dt),e.push(...a.map(U.parse))),{values:e,numColors:n,tokenised:t}}function ft(t){return mt(t).values}function ht(t){const{values:e,numColors:n,tokenised:s}=mt(t),a=e.length;return t=>{let e=s;for(let s=0;s<a;s++)e=e.replace(s<n?ut:dt,s<n?lt.transform(t[s]):N(t[s]));return e}}const gt=t=>"number"===typeof t?0:t;function vt(t){const e=ft(t),n=ht(t);return n(e.map(gt))}const bt={test:pt,parse:ft,createTransformer:ht,getAnimatableNone:vt},yt=t=>"number"===typeof t,wt=(t,e)=>n=>e(t(n)),Mt=(...t)=>t.reduce(wt);function $t(t,e){return yt(t)?n=>I(t,e,n):lt.test(t)?ct(t,e):kt(t,e)}const _t=(t,e)=>{const n=[...t],s=n.length,a=t.map(((t,n)=>$t(t,e[n])));return t=>{for(let e=0;e<s;e++)n[e]=a[e](t);return n}},xt=(t,e)=>{const n=Object.assign(Object.assign({},t),e),s={};for(const a in n)void 0!==t[a]&&void 0!==e[a]&&(s[a]=$t(t[a],e[a]));return t=>{for(const e in s)n[e]=s[e](t);return n}};function Ot(t){const e=bt.parse(t),n=e.length;let s=0,a=0,o=0;for(let r=0;r<n;r++)s||"number"===typeof e[r]?s++:void 0!==e[r].hue?o++:a++;return{parsed:e,numNumbers:s,numRGB:a,numHSL:o}}const kt=(t,e)=>{const n=bt.createTransformer(e),s=Ot(t),a=Ot(e),o=s.numHSL===a.numHSL&&s.numRGB===a.numRGB&&s.numNumbers>=a.numNumbers;return o?Mt(_t(s.parsed,a.parsed),n):(b(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),n=>`${n>0?e:t}`)},Ct=(t,e)=>n=>I(t,e,n);function jt(t){return"number"===typeof t?Ct:"string"===typeof t?lt.test(t)?ct:kt:Array.isArray(t)?_t:"object"===typeof t?xt:void 0}function At(t,e,n){const s=[],a=n||jt(t[0]),o=t.length-1;for(let r=0;r<o;r++){let n=a(t[r],t[r+1]);if(e){const t=Array.isArray(e)?e[r]:e;n=Mt(t,n)}s.push(n)}return s}function Lt([t,e],[n]){return s=>n(B(t,e,s))}function St(t,e){const n=t.length,s=n-1;return a=>{let o=0,r=!1;if(a<=t[0]?r=!0:a>=t[s]&&(o=s-1,r=!0),!r){let e=1;for(;e<n;e++)if(t[e]>a||e===s)break;o=e-1}const i=B(t[o],t[o+1],a);return e[o](i)}}function Rt(t,e,{clamp:n=!0,ease:s,mixer:a}={}){const o=t.length;y(o===e.length,"Both input and output ranges must be the same length"),y(!s||!Array.isArray(s)||s.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),t[0]>t[o-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());const r=At(e,s,a),i=2===o?Lt(t,r):St(t,r);return n?e=>i(w(t[0],t[o-1],e)):i}const Ft=t=>e=>1-t(1-e),Tt=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Dt=t=>e=>Math.pow(e,t),Bt=t=>e=>e*e*((t+1)*e-t),It=t=>{const e=Bt(t);return t=>(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))},qt=1.525,Nt=4/11,zt=8/11,Pt=.9,Zt=Dt(2),Ht=(Ft(Zt),Tt(Zt)),Ut=t=>1-Math.sin(Math.acos(t)),Yt=Ft(Ut),Et=(Tt(Yt),Bt(qt)),Gt=(Ft(Et),Tt(Et),It(qt),4356/361),Wt=35442/1805,Jt=16061/1805,Kt=t=>{if(1===t||0===t)return t;const e=t*t;return t<Nt?7.5625*e:t<zt?9.075*e-9.9*t+3.4:t<Pt?Gt*e-Wt*t+Jt:10.8*t*t-20.52*t+10.72};Ft(Kt);function Qt(t,e){return t.map((()=>e||Ht)).splice(0,t.length-1)}function Vt(t){const e=t.length;return t.map(((t,n)=>0!==n?n/(e-1):0))}function Xt(t,e){return t.map((t=>t*e))}function te({from:t=0,to:e=1,ease:n,offset:s,duration:a=300}){const o={done:!1,value:t},r=Array.isArray(e)?e:[t,e],i=Xt(s&&s.length===r.length?s:Vt(r),a);function c(){return Rt(i,r,{ease:Array.isArray(n)?n:Qt(r,n)})}let l=c();return{next:t=>(o.value=l(t),o.done=t>=a,o),flipTarget:()=>{r.reverse(),l=c()}}}function ee({velocity:t=0,from:e=0,power:n=.8,timeConstant:s=350,restDelta:a=.5,modifyTarget:o}){const r={done:!1,value:e};let i=n*t;const c=e+i,l=void 0===o?c:o(c);return l!==c&&(i=l-e),{next:t=>{const e=-i*Math.exp(-t/s);return r.done=!(e>a||e<-a),r.value=r.done?l:l+e,r},flipTarget:()=>{}}}const ne={keyframes:te,spring:T,decay:ee};function se(t){if(Array.isArray(t.to))return te;if(ne[t.type])return ne[t.type];const e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?te:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?T:te}const ae=1/60*1e3,oe="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),re="undefined"!==typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(oe())),ae);function ie(t){let e=[],n=[],s=0,a=!1,o=!1;const r=new WeakSet,i={schedule:(t,o=!1,i=!1)=>{const c=i&&a,l=c?e:n;return o&&r.add(t),-1===l.indexOf(t)&&(l.push(t),c&&a&&(s=e.length)),t},cancel:t=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1),r.delete(t)},process:c=>{if(a)o=!0;else{if(a=!0,[e,n]=[n,e],n.length=0,s=e.length,s)for(let n=0;n<s;n++){const s=e[n];s(c),r.has(s)&&(i.schedule(s),t())}a=!1,o&&(o=!1,i.process(c))}}};return i}const ce=40;let le=!0,ue=!1,de=!1;const pe={delta:0,timestamp:0},me=["read","update","preRender","render","postRender"],fe=me.reduce(((t,e)=>(t[e]=ie((()=>ue=!0)),t)),{}),he=me.reduce(((t,e)=>{const n=fe[e];return t[e]=(t,e=!1,s=!1)=>(ue||ye(),n.schedule(t,e,s)),t}),{}),ge=me.reduce(((t,e)=>(t[e]=fe[e].cancel,t)),{}),ve=(me.reduce(((t,e)=>(t[e]=()=>fe[e].process(pe),t)),{}),t=>fe[t].process(pe)),be=t=>{ue=!1,pe.delta=le?ae:Math.max(Math.min(t-pe.timestamp,ce),1),pe.timestamp=t,de=!0,me.forEach(ve),de=!1,ue&&(le=!1,re(be))},ye=()=>{ue=!0,le=!0,de||re(be)};var we=he;function Me(t,e,n=0){return t-e-n}function $e(t,e,n=0,s=!0){return s?Me(e+-t,e,n):e-(t-e)+n}function _e(t,e,n,s){return s?t>=e+n:t<=-n}const xe=t=>{const e=({delta:e})=>t(e);return{start:()=>we.update(e,!0),stop:()=>ge.update(e)}};function Oe(t){var e,n,{from:s,autoplay:a=!0,driver:o=xe,elapsed:r=0,repeat:i=0,repeatType:c="loop",repeatDelay:l=0,onPlay:u,onStop:d,onComplete:p,onRepeat:m,onUpdate:f}=t,h=v(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,b,y,{to:w}=h,M=0,$=h.duration,_=!1,x=!0;const O=se(h);(null===(n=(e=O).needsInterpolation)||void 0===n?void 0:n.call(e,s,w))&&(y=Rt([0,100],[s,w],{clamp:!1}),s=0,w=100);const k=O(Object.assign(Object.assign({},h),{from:s,to:w}));function C(){M++,"reverse"===c?(x=M%2===0,r=$e(r,$,l,x)):(r=Me(r,$,l),"mirror"===c&&k.flipTarget()),_=!1,m&&m()}function j(){g.stop(),p&&p()}function A(t){if(x||(t=-t),r+=t,!_){const t=k.next(Math.max(0,r));b=t.value,y&&(b=y(b)),_=x?t.done:r<=0}null===f||void 0===f||f(b),_&&(0===M&&(null!==$&&void 0!==$||($=r)),M<i?_e(r,$,l,x)&&C():j())}function L(){null===u||void 0===u||u(),g=o(A),g.start()}return a&&L(),{stop:()=>{null===d||void 0===d||d(),g.stop()}}}var ke={name:"ArtCmt",props:{artId:{type:[String,Number],required:!0}},data(){return{cmtList:[],loading:!1,finished:!1,page:0,isShowBox1:!0,count:0,cmt:""}},created(){this.initCmtList()},methods:{async initCmtList(){const{data:t}=await m(this.artId,this.page);this.cmtList=[...this.cmtList,...t.documents],this.loading=!1,0===t.documents.length?this.finished=!0:this.count=t.documents[0].comm_count,this.page+=1},onLoad(){this.initCmtList()},showBox2(){this.isShowBox1=!1,this.$nextTick((()=>{this.$refs.iptCmt.focus()}))},hideBox2(){setTimeout((()=>{this.isShowBox1=!0,this.cmt=""}),100)},async addCmt(){const t=await f(this.artId,this.cmt);this.cmtList.unshift(t),this.count+=1},scrollToCmtList(){const t=window.scrollY,e=document.querySelector(".article-container").offsetHeight;Oe({from:t,to:e,onUpdate:t=>window.scrollTo(0,t)})}}},Ce=ke,je=n(1001),Ae=(0,je.Z)(Ce,h,g,!1,null,"51092854",null),Le=Ae.exports,Se={name:"ArtDetail",components:{ArtCmt:Le},props:["id"],data(){return{article:null}},watch:{id(){this.article=null,this.initArticle()}},created(){this.initArticle()},beforeRouteLeave(t,e,n){e.meta.top=window.scrollY,n()},methods:{async initArticle(){const{data:t}=await c(this.id);this.article=t.documents[0]},async setFollow(){await l(this.article.aut_id),this.$toast.success("关注成功"),this.article.is_followed=!0},async setUnfollow(){await u(this.article.aut_id),this.$toast.success("取关成功"),this.article.is_followed=!1},async setLike(){await d(this.article.art_id),this.$toast.success("点赞成功"),this.article.attitude=!0},async setDisLike(){await p(this.article.art_id),this.$toast.success("取消点赞成功"),this.article.attitude=!1}}},Re=Se,Fe=(0,je.Z)(Re,s,a,!1,null,"0f4daab0",null),Te=Fe.exports}}]);
//# sourceMappingURL=281.f7ecf35b.js.map
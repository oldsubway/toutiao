"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[887],{1887:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("van-nav-bar",{attrs:{fixed:"",title:"客服","left-arrow":""},on:{"click-left":function(s){return t.$router.back()}}}),s("div",{staticClass:"chat-list"},[s("div",{staticClass:"chat-time"},[t._v(t._s(t.message))]),t._l(t.list,(function(e,a){return s("div",{key:a},["kf"===e.name?s("div",{staticClass:"chat-item left"},[s("van-image",{attrs:{fit:"cover",round:"",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),s("div",{staticClass:"chat-pao"},[t._v(t._s(e.msg))])],1):s("div",{staticClass:"chat-item right"},[s("div",{staticClass:"chat-pao"},[t._v(t._s(e.msg))]),s("van-image",{attrs:{fit:"cover",round:"",src:t.userAvatar}})],1)])}))],2),s("div",{staticClass:"reply-container van-hairline--top"},[s("van-field",{attrs:{placeholder:"说点什么..."},scopedSlots:t._u([{key:"button",fn:function(){return[s("span",{staticStyle:{"font-size":"12px",color:"#999"},on:{click:function(s){return t.send()}}},[t._v("提交")])]},proxy:!0}]),model:{value:t.word,callback:function(s){t.word="string"===typeof s?s.trim():s},expression:"word"}})],1)],1)},n=[],i=(e(7658),e(3822)),r=e(5743),o=e.n(r),c={name:"ChatView",data(){return{word:"",list:[{name:"kf",msg:"你好"},{name:"me",msg:"你好"},{name:"kf",msg:"你好"}],sk:null,canSend:!1,message:o()().format("YYYY-MM-DD HH:mm:ss")}},computed:{...(0,i.Se)(["userAvatar"])},created(){this.initConnet()},beforeDestroy(){this.sk.close(),this.sk=""},methods:{send(){this.word&&this.canSend&&(this.list.push({name:"me",msg:this.word}),this.sk.send(this.word),this.word="")},initConnet(){const t=new WebSocket("ws://localhost:3000");t.addEventListener("error",(()=>{this.$notify({type:"danger",message:"与服务器连接失败"})})),t.addEventListener("message",(t=>{this.list.push(JSON.parse(t.data))})),t.addEventListener("open",(()=>{this.canSend=!0})),t.addEventListener("close",(()=>{this.canSend=!1})),this.sk=t}}},d=c,l=e(1001),u=(0,l.Z)(d,a,n,!1,null,"e4b5784c",null),h=u.exports}}]);
//# sourceMappingURL=887.edea2537.js.map